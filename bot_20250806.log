2025-08-06 22:54:49,019 - __main__ - INFO - Starting Saudi High School Science Telegram Bot...
2025-08-06 22:54:49,045 - scheduler - INFO - Scheduler thread started
2025-08-06 22:54:49,045 - scheduler - INFO - Content scheduler started
2025-08-06 22:54:49,045 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 22:54:49,046 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 22:54:49,047 - scheduler - INFO - Attempting to post study_advice content
2025-08-06 22:54:49,078 - httpcore.connection - DEBUG - connect_tcp.started host='api.telegram.org' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 22:54:49,216 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f4f8cbb7850>
2025-08-06 22:54:49,217 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f4f8d5559a0> server_hostname='api.telegram.org' timeout=5.0
2025-08-06 22:54:49,343 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x7f4f8cbb7650>
2025-08-06 22:54:49,344 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,344 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:54:49,344 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,345 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:54:49,345 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,445 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-6e982705-b693-46d2-ae89-f88e7b92f18f', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد أكاديمي متخصص في إرشاد الطلاب لتحقيق التفوق الدراسي.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة دراسية عملية للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية للمذاكرة الفعالة\n        2. تؤكد على أهمية تنظيم الوقت\n        3. تشجع على السلوك الإيجابي في المدرسة\n        4. تتضمن إرشادات للمواظبة والانضباط\n        5. لا تزيد عن 180 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - advice: النصيحة الدراسية\n        - focus_area: المجال الذي تركز عليه النصيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 22:54:49,451 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:54:49,452 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 22:54:49,458 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 06 Aug 2025 22:54:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'253'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-08-06 22:54:49,460 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,460 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:54:49,460 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:54:49,461 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:54:49,461 - bot - INFO - Bot connected successfully: TuwaiqBioBot
2025-08-06 22:54:49,462 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,463 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:54:49,463 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,463 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:54:49,464 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,466 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f4f87ee4410>
2025-08-06 22:54:49,466 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f4f8d555910> server_hostname='api.openai.com' timeout=5.0
2025-08-06 22:54:49,481 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f4f87ee5a50>
2025-08-06 22:54:49,481 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,482 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:54:49,482 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,482 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:54:49,482 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,557 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:54:49 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_e96db0b6302b409880320f5b764ab25b'), (b'x-envoy-upstream-service-time', b'8'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=uxgUzLKOBz75YEWhxxrfnCvOJxhvi6opGNcFz.kNJhg-1754520889-1.0.1.1-5E7ooQeeYqlQ5UX3KeLP8oRPCI8L7y8_OYXGNAgJ_kZ8JuyVM1b7FgEy719C7esZANhk.HVT51xzMoQheU60BUdnO2SUz6fx4K8PkPhGbCI; path=/; expires=Wed, 06-Aug-25 23:24:49 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=2LKFwIFSmZFqTokd3VU4OGvccwLCO_7IcMTol97u5po-1754520889550-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21e47484a1e79-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:54:49,557 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,558 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:54:49,558 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:54:49,558 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:54:49,558 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Wed, 06 Aug 2025 22:54:49 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '279'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_e96db0b6302b409880320f5b764ab25b'), ('x-envoy-upstream-service-time', '8'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=uxgUzLKOBz75YEWhxxrfnCvOJxhvi6opGNcFz.kNJhg-1754520889-1.0.1.1-5E7ooQeeYqlQ5UX3KeLP8oRPCI8L7y8_OYXGNAgJ_kZ8JuyVM1b7FgEy719C7esZANhk.HVT51xzMoQheU60BUdnO2SUz6fx4K8PkPhGbCI; path=/; expires=Wed, 06-Aug-25 23:24:49 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=2LKFwIFSmZFqTokd3VU4OGvccwLCO_7IcMTol97u5po-1754520889550-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '96b21e47484a1e79-ORD'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-08-06 22:54:49,558 - openai._base_client - DEBUG - request_id: req_e96db0b6302b409880320f5b764ab25b
2025-08-06 22:54:49,558 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:54:49,559 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:54:49,559 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:54:49,560 - content_generator - ERROR - Error generating study advice: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:54:49,560 - bot - ERROR - Failed to generate content for type: study_advice
2025-08-06 22:54:49,562 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-f68038b3-1dbf-4160-8d0a-c74af03b6b66', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد أكاديمي متخصص في إرشاد الطلاب لتحقيق التفوق الدراسي.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة دراسية عملية للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية للمذاكرة الفعالة\n        2. تؤكد على أهمية تنظيم الوقت\n        3. تشجع على السلوك الإيجابي في المدرسة\n        4. تتضمن إرشادات للمواظبة والانضباط\n        5. لا تزيد عن 180 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - advice: النصيحة الدراسية\n        - focus_area: المجال الذي تركز عليه النصيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 22:54:49,562 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:54:49,563 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,563 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:54:49,563 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,563 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:54:49,564 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,606 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Server', b'nginx/1.18.0'), (b'Date', b'Wed, 06 Aug 2025 22:54:49 GMT'), (b'Content-Type', b'application/json'), (b'Content-Length', b'803'), (b'Connection', b'keep-alive'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'Access-Control-Allow-Origin', b'*'), (b'Access-Control-Allow-Methods', b'GET, POST, OPTIONS'), (b'Access-Control-Expose-Headers', b'Content-Length,Content-Type,Date,Server,Connection')])
2025-08-06 22:54:49,606 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,606 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:54:49,606 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:54:49,607 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:54:49,607 - bot - INFO - Channel access confirmed: أحياء طويق | أسئلة ومراجعة
2025-08-06 22:54:49,609 - bot - INFO - Bot is ready and running...
2025-08-06 22:54:49,609 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 22:54:49,635 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:54:49 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_6fe400b432144aa8ba4349e0c6ca1e6d'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21e47c9561e79-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:54:49,635 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,635 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:54:49,635 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:54:49,636 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:54:49,636 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:54:49 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_6fe400b432144aa8ba4349e0c6ca1e6d', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21e47c9561e79-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:54:49,636 - openai._base_client - DEBUG - request_id: req_6fe400b432144aa8ba4349e0c6ca1e6d
2025-08-06 22:54:49,636 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:54:49,637 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:54:49,637 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:54:49,637 - content_generator - ERROR - Error generating study advice: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:54:49,637 - bot - ERROR - Failed to generate content for type: study_advice
2025-08-06 22:54:49,639 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-711149b5-a25e-4fae-b0fc-f05bf9ad61f5', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد أكاديمي متخصص في إرشاد الطلاب لتحقيق التفوق الدراسي.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة دراسية عملية للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية للمذاكرة الفعالة\n        2. تؤكد على أهمية تنظيم الوقت\n        3. تشجع على السلوك الإيجابي في المدرسة\n        4. تتضمن إرشادات للمواظبة والانضباط\n        5. لا تزيد عن 180 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - advice: النصيحة الدراسية\n        - focus_area: المجال الذي تركز عليه النصيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 22:54:49,639 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:54:49,640 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,640 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:54:49,640 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,640 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:54:49,640 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,722 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:54:49 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_98d2da9b2a494389bce329d7dd6f791e'), (b'x-envoy-upstream-service-time', b'12'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21e484a7d1e79-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:54:49,723 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,723 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:54:49,723 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:54:49,723 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:54:49,723 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:54:49 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_98d2da9b2a494389bce329d7dd6f791e', 'x-envoy-upstream-service-time': '12', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21e484a7d1e79-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:54:49,723 - openai._base_client - DEBUG - request_id: req_98d2da9b2a494389bce329d7dd6f791e
2025-08-06 22:54:49,723 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:54:49,724 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:54:49,724 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:54:49,724 - content_generator - ERROR - Error generating study advice: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:54:49,724 - bot - ERROR - Failed to generate content for type: study_advice
2025-08-06 22:54:49,724 - bot - ERROR - Failed to post study_advice content after 3 attempts
2025-08-06 22:54:49,725 - scheduler - ERROR - Failed to post study_advice content
2025-08-06 22:54:49,725 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 22:54:49,725 - scheduler - INFO - Attempting to post motivational_message content
2025-08-06 22:54:49,726 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-6e3f9dd5-3e51-4d00-ae90-e1e49aded5bc', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على الجد والاجتهاد.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 22:54:49,727 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:54:49,727 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:54:49,727 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:54:49,727 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:54:49,727 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:54:49,727 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:54:50,079 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 503, b'Service Unavailable', [(b'Date', b'Wed, 06 Aug 2025 22:54:50 GMT'), (b'Content-Type', b'text/plain'), (b'Content-Length', b'95'), (b'Connection', b'keep-alive'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21e48dbd51e79-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:54:50,080 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:54:50,080 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:54:50,080 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:54:50,080 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:54:50,081 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "503 Service Unavailable" Headers({'date': 'Wed, 06 Aug 2025 22:54:50 GMT', 'content-type': 'text/plain', 'content-length': '95', 'connection': 'keep-alive', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21e48dbd51e79-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:54:50,081 - openai._base_client - DEBUG - request_id: None
2025-08-06 22:54:50,081 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Server error '503 Service Unavailable' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503
2025-08-06 22:54:50,082 - openai._base_client - DEBUG - Retrying due to status code 503
2025-08-06 22:54:50,082 - openai._base_client - DEBUG - 2 retries left
2025-08-06 22:54:50,082 - openai._base_client - INFO - Retrying request to /chat/completions in 0.415880 seconds
2025-08-06 22:54:50,498 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-6e3f9dd5-3e51-4d00-ae90-e1e49aded5bc', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على الجد والاجتهاد.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 22:54:50,500 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:54:50,501 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:54:50,501 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:54:50,501 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:54:50,501 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:54:50,501 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:54:50,579 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:54:50 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_f0984d64e2fb4deaa8f1697f15b0a822'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21e4dafe81e79-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:54:50,579 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:54:50,579 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:54:50,579 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:54:50,579 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:54:50,580 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:54:50 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_f0984d64e2fb4deaa8f1697f15b0a822', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21e4dafe81e79-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:54:50,580 - openai._base_client - DEBUG - request_id: req_f0984d64e2fb4deaa8f1697f15b0a822
2025-08-06 22:54:50,580 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:54:50,580 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:54:50,580 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:54:50,581 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:54:50,581 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 22:54:50,581 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-a15aa813-f7c7-4765-be5e-1d3ebdb265bc', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على السلوك الإيجابي.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 22:54:50,582 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:54:50,582 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:54:50,582 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:54:50,583 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:54:50,583 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:54:50,583 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:54:50,659 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:54:50 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_12f57fc6b88046409cd280c16236500a'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21e4e29491e79-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:54:50,660 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:54:50,660 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:54:50,660 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:54:50,660 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:54:50,660 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:54:50 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_12f57fc6b88046409cd280c16236500a', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21e4e29491e79-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:54:50,660 - openai._base_client - DEBUG - request_id: req_12f57fc6b88046409cd280c16236500a
2025-08-06 22:54:50,661 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:54:50,661 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:54:50,661 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:54:50,661 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:54:50,661 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 22:54:50,662 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-a7dd5073-6d4c-4c90-9d9c-1717974fd7e6', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على التفوق الأكاديمي.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 22:54:50,663 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:54:50,663 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:54:50,663 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:54:50,663 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:54:50,663 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:54:50,664 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:54:50,770 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:54:50 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_1ec6fb9e96cb4d67a4735cc7fce68f6a'), (b'x-envoy-upstream-service-time', b'21'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21e4eaa661e79-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:54:50,770 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:54:50,770 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:54:50,770 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:54:50,770 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:54:50,771 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:54:50 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_1ec6fb9e96cb4d67a4735cc7fce68f6a', 'x-envoy-upstream-service-time': '21', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21e4eaa661e79-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:54:50,771 - openai._base_client - DEBUG - request_id: req_1ec6fb9e96cb4d67a4735cc7fce68f6a
2025-08-06 22:54:50,771 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:54:50,771 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:54:50,771 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:54:50,771 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:54:50,772 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 22:54:50,772 - bot - ERROR - Failed to post motivational_message content after 3 attempts
2025-08-06 22:54:50,772 - scheduler - ERROR - Failed to post motivational_message content
2025-08-06 22:55:52,202 - __main__ - INFO - Starting Saudi High School Science Telegram Bot...
2025-08-06 22:55:52,212 - scheduler - INFO - Scheduler thread started
2025-08-06 22:55:52,212 - scheduler - INFO - Content scheduler started
2025-08-06 22:55:52,213 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 22:55:52,215 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.telegram.org:443
2025-08-06 22:55:52,215 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 22:55:52,215 - scheduler - INFO - Attempting to post multiple_choice_question content
2025-08-06 22:55:52,385 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-9daf09aa-d571-4118-ab3f-35a33e05003b', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في المناهج السعودية للمرحلة الثانوية. اجعل المحتوى تعليمي ومفيد.'}, {'role': 'user', 'content': '\n        أنشئ سؤال اختيار من متعدد في مادة علم الأرض للمرحلة الثانوية وفق المناهج السعودية.\n        \n        المطلوب:\n        1. سؤال تعليمي مفيد ومناسب للمستوى\n        2. أربعة خيارات (أ، ب، ج، د)\n        3. الإجابة الصحيحة\n        4. شرح مختصر للإجابة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - question: نص السؤال\n        - options: قائمة بأربعة خيارات\n        - correct_answer: رقم الإجابة الصحيحة (0-3)\n        - explanation: شرح الإجابة الصحيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 22:55:52,392 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:55:52,392 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 22:55:52,405 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f0683f95490>
2025-08-06 22:55:52,405 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f0688e0a8d0> server_hostname='api.openai.com' timeout=5.0
2025-08-06 22:55:52,419 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f0683f95550>
2025-08-06 22:55:52,419 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,420 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:55:52,420 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,420 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:55:52,420 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,494 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:55:52 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_8338463ce99e42d399c7491993b28690'), (b'x-envoy-upstream-service-time', b'0'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=aYXVYig3T2dvZ9QFh75JXPGblJz.F2U43vQnUmASVAM-1754520952-1.0.1.1-yF7tZT94MvIEQ_dWDJMNJdi4Zgl.GCe9N6wRIX83LSorYPEvA16fztUUi.1pQT12fJK8nJ9l3SNTz_58tYtL.eqcy6y.wKb4PpUiLKSoEKU; path=/; expires=Wed, 06-Aug-25 23:25:52 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=no.Y8jkGG_RA.nmH1wpF275YDyh8OocqtCH_Far2bRY-1754520952488-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21fd0af26f85a-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:55:52,495 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,495 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:55:52,496 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:55:52,496 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:55:52,496 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Wed, 06 Aug 2025 22:55:52 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '279'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_8338463ce99e42d399c7491993b28690'), ('x-envoy-upstream-service-time', '0'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=aYXVYig3T2dvZ9QFh75JXPGblJz.F2U43vQnUmASVAM-1754520952-1.0.1.1-yF7tZT94MvIEQ_dWDJMNJdi4Zgl.GCe9N6wRIX83LSorYPEvA16fztUUi.1pQT12fJK8nJ9l3SNTz_58tYtL.eqcy6y.wKb4PpUiLKSoEKU; path=/; expires=Wed, 06-Aug-25 23:25:52 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=no.Y8jkGG_RA.nmH1wpF275YDyh8OocqtCH_Far2bRY-1754520952488-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '96b21fd0af26f85a-ORD'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-08-06 22:55:52,496 - openai._base_client - DEBUG - request_id: req_8338463ce99e42d399c7491993b28690
2025-08-06 22:55:52,496 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:55:52,498 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:55:52,498 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:55:52,498 - content_generator - ERROR - Error generating multiple choice question: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:55:52,506 - bot - ERROR - Failed to generate content for type: multiple_choice_question
2025-08-06 22:55:52,508 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-105e0bad-21b3-4a42-a62f-6269203a1aff', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في المناهج السعودية للمرحلة الثانوية. اجعل المحتوى تعليمي ومفيد.'}, {'role': 'user', 'content': '\n        أنشئ سؤال اختيار من متعدد في مادة البيئة للمرحلة الثانوية وفق المناهج السعودية.\n        \n        المطلوب:\n        1. سؤال تعليمي مفيد ومناسب للمستوى\n        2. أربعة خيارات (أ، ب، ج، د)\n        3. الإجابة الصحيحة\n        4. شرح مختصر للإجابة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - question: نص السؤال\n        - options: قائمة بأربعة خيارات\n        - correct_answer: رقم الإجابة الصحيحة (0-3)\n        - explanation: شرح الإجابة الصحيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 22:55:52,509 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:55:52,509 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,509 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:55:52,509 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,510 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:55:52,510 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,568 - urllib3.connectionpool - DEBUG - https://api.telegram.org:443 "GET /bot8446328531:AAG8CZQahNFV_q9dtzP6i7gzVSxxchLsPKo/getMe HTTP/1.1" 200 253
2025-08-06 22:55:52,569 - bot - INFO - Bot connected successfully: TuwaiqBioBot
2025-08-06 22:55:52,570 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.telegram.org:443
2025-08-06 22:55:52,594 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:55:52 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_b381ca561964416b8d3d9debbb3f288e'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21fd13846f85a-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:55:52,595 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,595 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:55:52,595 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:55:52,595 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:55:52,595 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:55:52 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_b381ca561964416b8d3d9debbb3f288e', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21fd13846f85a-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:55:52,595 - openai._base_client - DEBUG - request_id: req_b381ca561964416b8d3d9debbb3f288e
2025-08-06 22:55:52,596 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:55:52,596 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:55:52,596 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:55:52,596 - content_generator - ERROR - Error generating multiple choice question: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:55:52,597 - bot - ERROR - Failed to generate content for type: multiple_choice_question
2025-08-06 22:55:52,598 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-4c7bd2ae-f5e5-4c4b-a530-45bb4e4f5dc8', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في المناهج السعودية للمرحلة الثانوية. اجعل المحتوى تعليمي ومفيد.'}, {'role': 'user', 'content': '\n        أنشئ سؤال اختيار من متعدد في مادة البيئة للمرحلة الثانوية وفق المناهج السعودية.\n        \n        المطلوب:\n        1. سؤال تعليمي مفيد ومناسب للمستوى\n        2. أربعة خيارات (أ، ب، ج، د)\n        3. الإجابة الصحيحة\n        4. شرح مختصر للإجابة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - question: نص السؤال\n        - options: قائمة بأربعة خيارات\n        - correct_answer: رقم الإجابة الصحيحة (0-3)\n        - explanation: شرح الإجابة الصحيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 22:55:52,598 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:55:52,599 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,599 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:55:52,599 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,599 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:55:52,599 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,674 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:55:52 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_0958bfd9ab7a46c7930cb65691ed35bf'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21fd1c96af85a-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:55:52,674 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,674 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:55:52,674 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:55:52,674 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:55:52,674 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:55:52 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_0958bfd9ab7a46c7930cb65691ed35bf', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21fd1c96af85a-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:55:52,674 - openai._base_client - DEBUG - request_id: req_0958bfd9ab7a46c7930cb65691ed35bf
2025-08-06 22:55:52,675 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:55:52,675 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:55:52,675 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:55:52,675 - content_generator - ERROR - Error generating multiple choice question: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:55:52,675 - bot - ERROR - Failed to generate content for type: multiple_choice_question
2025-08-06 22:55:52,676 - bot - ERROR - Failed to post multiple_choice_question content after 3 attempts
2025-08-06 22:55:52,676 - scheduler - ERROR - Failed to post multiple_choice_question content
2025-08-06 22:55:52,676 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 22:55:52,676 - scheduler - INFO - Attempting to post study_advice content
2025-08-06 22:55:52,677 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-f826307e-bf17-4694-bf90-e66db821587b', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد أكاديمي متخصص في إرشاد الطلاب لتحقيق التفوق الدراسي.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة دراسية عملية للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية للمذاكرة الفعالة\n        2. تؤكد على أهمية تنظيم الوقت\n        3. تشجع على السلوك الإيجابي في المدرسة\n        4. تتضمن إرشادات للمواظبة والانضباط\n        5. لا تزيد عن 180 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - advice: النصيحة الدراسية\n        - focus_area: المجال الذي تركز عليه النصيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 22:55:52,678 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:55:52,678 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,679 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:55:52,679 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,679 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:55:52,679 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,753 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:55:52 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_02da7cccb4a84403ae471d2d07fe6e3e'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21fd24a5ef85a-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:55:52,753 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,753 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:55:52,754 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:55:52,754 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:55:52,754 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:55:52 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_02da7cccb4a84403ae471d2d07fe6e3e', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21fd24a5ef85a-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:55:52,754 - openai._base_client - DEBUG - request_id: req_02da7cccb4a84403ae471d2d07fe6e3e
2025-08-06 22:55:52,754 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:55:52,755 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:55:52,755 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:55:52,755 - content_generator - ERROR - Error generating study advice: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:55:52,755 - bot - ERROR - Failed to generate content for type: study_advice
2025-08-06 22:55:52,756 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-e590b344-5a2c-4402-9b01-627ef7d32036', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد أكاديمي متخصص في إرشاد الطلاب لتحقيق التفوق الدراسي.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة دراسية عملية للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية للمذاكرة الفعالة\n        2. تؤكد على أهمية تنظيم الوقت\n        3. تشجع على السلوك الإيجابي في المدرسة\n        4. تتضمن إرشادات للمواظبة والانضباط\n        5. لا تزيد عن 180 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - advice: النصيحة الدراسية\n        - focus_area: المجال الذي تركز عليه النصيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 22:55:52,757 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:55:52,757 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,757 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:55:52,758 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,758 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:55:52,758 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,849 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:55:52 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_71aff34230c74cb88177726f5c82c209'), (b'x-envoy-upstream-service-time', b'22'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21fd2cb4ff85a-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:55:52,849 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,849 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:55:52,849 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:55:52,849 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:55:52,849 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:55:52 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_71aff34230c74cb88177726f5c82c209', 'x-envoy-upstream-service-time': '22', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21fd2cb4ff85a-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:55:52,850 - openai._base_client - DEBUG - request_id: req_71aff34230c74cb88177726f5c82c209
2025-08-06 22:55:52,850 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:55:52,850 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:55:52,850 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:55:52,850 - content_generator - ERROR - Error generating study advice: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:55:52,851 - bot - ERROR - Failed to generate content for type: study_advice
2025-08-06 22:55:52,852 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-8d595026-7027-45a1-aa2f-3e6681887699', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد أكاديمي متخصص في إرشاد الطلاب لتحقيق التفوق الدراسي.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة دراسية عملية للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية للمذاكرة الفعالة\n        2. تؤكد على أهمية تنظيم الوقت\n        3. تشجع على السلوك الإيجابي في المدرسة\n        4. تتضمن إرشادات للمواظبة والانضباط\n        5. لا تزيد عن 180 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - advice: النصيحة الدراسية\n        - focus_area: المجال الذي تركز عليه النصيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 22:55:52,852 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:55:52,852 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,853 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:55:52,853 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,853 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:55:52,853 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:55:52,925 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:55:52 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_f258a70a47ee4106b31a536f81a36bf9'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b21fd35c8ff85a-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:55:52,926 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:55:52,926 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:55:52,926 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:55:52,926 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:55:52,926 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:55:52 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_f258a70a47ee4106b31a536f81a36bf9', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b21fd35c8ff85a-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:55:52,926 - openai._base_client - DEBUG - request_id: req_f258a70a47ee4106b31a536f81a36bf9
2025-08-06 22:55:52,926 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:55:52,927 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:55:52,927 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:55:52,927 - content_generator - ERROR - Error generating study advice: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:55:52,927 - bot - ERROR - Failed to generate content for type: study_advice
2025-08-06 22:55:52,927 - bot - ERROR - Failed to post study_advice content after 3 attempts
2025-08-06 22:55:52,927 - scheduler - ERROR - Failed to post study_advice content
2025-08-06 22:55:52,944 - urllib3.connectionpool - DEBUG - https://api.telegram.org:443 "GET /bot8446328531:AAG8CZQahNFV_q9dtzP6i7gzVSxxchLsPKo/getChat?chat_id=-1002868373922 HTTP/1.1" 200 803
2025-08-06 22:55:52,945 - bot - INFO - Channel access confirmed: أحياء طويق | أسئلة ومراجعة
2025-08-06 22:55:52,946 - bot - INFO - Bot is ready and running...
2025-08-06 22:56:41,368 - __main__ - INFO - Starting Saudi High School Science Telegram Bot...
2025-08-06 22:56:41,379 - scheduler - INFO - Scheduler thread started
2025-08-06 22:56:41,380 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 22:56:41,380 - scheduler - INFO - Attempting to post educational_tip content
2025-08-06 22:56:41,379 - scheduler - INFO - Content scheduler started
2025-08-06 22:56:41,381 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 22:56:41,384 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.telegram.org:443
2025-08-06 22:56:41,554 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-9978c962-9b1e-4b2d-92ee-7edcff27674b', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة الأحياء للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 22:56:41,560 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:56:41,560 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 22:56:41,574 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f52022ecad0>
2025-08-06 22:56:41,574 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f52032ff260> server_hostname='api.openai.com' timeout=5.0
2025-08-06 22:56:41,590 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f52022ecb90>
2025-08-06 22:56:41,599 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:56:41,599 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:56:41,599 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:56:41,600 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:56:41,600 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:56:41,678 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:56:41 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_692ec28b60894294aae5ee3a14c246ee'), (b'x-envoy-upstream-service-time', b'3'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=1G7j8U8BgFy2eVxZbT5LkNtbaISokM_XNX3bn.6y9CE-1754521001-1.0.1.1-JnpfxWJeOKGH20L5xNKu9Tfy5VtvwO8UpiHfl_7UpJ8JNSGruc6T0Y6ogeZosmCatB5BWSU72JLzROMNRDzeIYZRueK3jCrDmNTL3Ped_kQ; path=/; expires=Wed, 06-Aug-25 23:26:41 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=sxbLZuFJ.BEs44quUkCF_ZznXCXtaKjZzMag6fNtNI0-1754521001670-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b2210408b1eae6-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:56:41,679 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:56:41,679 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:56:41,679 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:56:41,679 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:56:41,679 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Wed, 06 Aug 2025 22:56:41 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '279'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_692ec28b60894294aae5ee3a14c246ee'), ('x-envoy-upstream-service-time', '3'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=1G7j8U8BgFy2eVxZbT5LkNtbaISokM_XNX3bn.6y9CE-1754521001-1.0.1.1-JnpfxWJeOKGH20L5xNKu9Tfy5VtvwO8UpiHfl_7UpJ8JNSGruc6T0Y6ogeZosmCatB5BWSU72JLzROMNRDzeIYZRueK3jCrDmNTL3Ped_kQ; path=/; expires=Wed, 06-Aug-25 23:26:41 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=sxbLZuFJ.BEs44quUkCF_ZznXCXtaKjZzMag6fNtNI0-1754521001670-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '96b2210408b1eae6-ORD'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-08-06 22:56:41,680 - openai._base_client - DEBUG - request_id: req_692ec28b60894294aae5ee3a14c246ee
2025-08-06 22:56:41,680 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:56:41,681 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:56:41,681 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:56:41,682 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:56:41,682 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 22:56:41,683 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-d3018f19-bc0c-428b-ab4e-718e1d98b2a0', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة البيئة للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 22:56:41,684 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:56:41,684 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:56:41,685 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:56:41,685 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:56:41,686 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:56:41,686 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:56:41,733 - urllib3.connectionpool - DEBUG - https://api.telegram.org:443 "GET /bot8446328531:AAG8CZQahNFV_q9dtzP6i7gzVSxxchLsPKo/getMe HTTP/1.1" 200 253
2025-08-06 22:56:41,734 - bot - INFO - Bot connected successfully: TuwaiqBioBot
2025-08-06 22:56:41,735 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.telegram.org:443
2025-08-06 22:56:41,759 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:56:41 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_18d0c0e3e4d1420eb8675744450a5c6b'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b2210499ffeae6-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:56:41,760 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:56:41,760 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:56:41,760 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:56:41,760 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:56:41,760 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:56:41 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_18d0c0e3e4d1420eb8675744450a5c6b', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b2210499ffeae6-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:56:41,760 - openai._base_client - DEBUG - request_id: req_18d0c0e3e4d1420eb8675744450a5c6b
2025-08-06 22:56:41,760 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:56:41,761 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:56:41,761 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:56:41,761 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:56:41,761 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 22:56:41,762 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-053d347f-6c46-459f-8aa9-a3ef11d66747', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة الأحياء للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 22:56:41,763 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:56:41,763 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:56:41,763 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:56:41,763 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:56:41,764 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:56:41,764 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:56:41,852 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:56:41 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_1f9631a786ab4527b269ebbc308dea43'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b221050b69eae6-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:56:41,852 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:56:41,852 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:56:41,853 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:56:41,853 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:56:41,853 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:56:41 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_1f9631a786ab4527b269ebbc308dea43', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b221050b69eae6-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:56:41,853 - openai._base_client - DEBUG - request_id: req_1f9631a786ab4527b269ebbc308dea43
2025-08-06 22:56:41,853 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:56:41,853 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:56:41,853 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:56:41,854 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:56:41,854 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 22:56:41,854 - bot - ERROR - Failed to post educational_tip content after 3 attempts
2025-08-06 22:56:41,854 - scheduler - ERROR - Failed to post educational_tip content
2025-08-06 22:56:41,854 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 22:56:41,855 - scheduler - INFO - Attempting to post educational_tip content
2025-08-06 22:56:41,856 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-a9cfea11-4fb6-4779-b8dc-1d4381e49934', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة البيئة للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 22:56:41,856 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:56:41,857 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:56:41,857 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:56:41,857 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:56:41,857 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:56:41,857 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:56:41,955 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:56:41 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_130ed96f90b74c7daa17ceb68193d9b3'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b22105ad36eae6-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:56:41,955 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:56:41,955 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:56:41,956 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:56:41,956 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:56:41,956 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:56:41 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_130ed96f90b74c7daa17ceb68193d9b3', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b22105ad36eae6-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:56:41,956 - openai._base_client - DEBUG - request_id: req_130ed96f90b74c7daa17ceb68193d9b3
2025-08-06 22:56:41,956 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:56:41,956 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:56:41,957 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:56:41,957 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:56:41,957 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 22:56:41,958 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-2cd4bf4e-1d0e-4d6d-8fdc-6fb62e74b829', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة علم الأرض للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 22:56:41,958 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:56:41,959 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:56:41,959 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:56:41,959 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:56:41,959 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:56:41,959 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:56:42,048 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:56:42 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_19988dbee2e644b59a2404f6cefbf98e'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b221064ebdeae6-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:56:42,049 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:56:42,049 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:56:42,049 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:56:42,049 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:56:42,049 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:56:42 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_19988dbee2e644b59a2404f6cefbf98e', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b221064ebdeae6-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:56:42,049 - openai._base_client - DEBUG - request_id: req_19988dbee2e644b59a2404f6cefbf98e
2025-08-06 22:56:42,050 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:56:42,050 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:56:42,050 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:56:42,050 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:56:42,050 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 22:56:42,051 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-fd05fea0-802f-4157-844a-7ce0cee710d0', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة البيئة للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 22:56:42,052 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 22:56:42,052 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 22:56:42,053 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 22:56:42,053 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 22:56:42,053 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 22:56:42,053 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 22:56:42,076 - urllib3.connectionpool - DEBUG - https://api.telegram.org:443 "GET /bot8446328531:AAG8CZQahNFV_q9dtzP6i7gzVSxxchLsPKo/getChat?chat_id=-1002868373922 HTTP/1.1" 200 803
2025-08-06 22:56:42,077 - bot - INFO - Channel access confirmed: أحياء طويق | أسئلة ومراجعة
2025-08-06 22:56:42,078 - bot - INFO - Bot is ready and running...
2025-08-06 22:56:42,138 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 22:56:42 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_dd319151bb9e49cbbb502e375f573182'), (b'x-envoy-upstream-service-time', b'11'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b22106d840eae6-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 22:56:42,138 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 22:56:42,138 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 22:56:42,138 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 22:56:42,139 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 22:56:42,139 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 22:56:42 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_dd319151bb9e49cbbb502e375f573182', 'x-envoy-upstream-service-time': '11', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b22106d840eae6-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 22:56:42,139 - openai._base_client - DEBUG - request_id: req_dd319151bb9e49cbbb502e375f573182
2025-08-06 22:56:42,139 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 22:56:42,140 - openai._base_client - DEBUG - Not retrying
2025-08-06 22:56:42,140 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 22:56:42,140 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 22:56:42,140 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 22:56:42,140 - bot - ERROR - Failed to post educational_tip content after 3 attempts
2025-08-06 22:56:42,140 - scheduler - ERROR - Failed to post educational_tip content
2025-08-06 23:01:42,144 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 23:01:42,145 - scheduler - INFO - Attempting to post educational_tip content
2025-08-06 23:01:42,146 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-44be11cc-96ad-4fda-acb0-3d14e632ddc3', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة البيئة للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 23:01:42,146 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:01:42,147 - httpcore.connection - DEBUG - close.started
2025-08-06 23:01:42,147 - httpcore.connection - DEBUG - close.complete
2025-08-06 23:01:42,147 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 23:01:42,160 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f52030ffb50>
2025-08-06 23:01:42,160 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f52032ff260> server_hostname='api.openai.com' timeout=5.0
2025-08-06 23:01:42,173 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f52030ffb90>
2025-08-06 23:01:42,174 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:01:42,174 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:01:42,174 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:01:42,174 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:01:42,174 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:01:42,256 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:01:42 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_926864b4f9344bbda62e1bb973b2634b'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b2285a9e6bd8ab-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:01:42,256 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:01:42,256 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:01:42,257 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:01:42,257 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:01:42,257 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:01:42 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_926864b4f9344bbda62e1bb973b2634b', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b2285a9e6bd8ab-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:01:42,257 - openai._base_client - DEBUG - request_id: req_926864b4f9344bbda62e1bb973b2634b
2025-08-06 23:01:42,257 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:01:42,258 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:01:42,258 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:01:42,258 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:01:42,258 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 23:01:42,259 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-d70294f0-eb0b-457c-b72f-c4f6fbed422d', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة الأحياء للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 23:01:42,260 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:01:42,260 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:01:42,261 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:01:42,261 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:01:42,261 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:01:42,261 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:01:42,337 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:01:42 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_24af69210942442ba7091d3c0d5ad8f5'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b2285b2fc2d8ab-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:01:42,338 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:01:42,338 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:01:42,338 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:01:42,338 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:01:42,338 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:01:42 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_24af69210942442ba7091d3c0d5ad8f5', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b2285b2fc2d8ab-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:01:42,338 - openai._base_client - DEBUG - request_id: req_24af69210942442ba7091d3c0d5ad8f5
2025-08-06 23:01:42,338 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:01:42,339 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:01:42,339 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:01:42,339 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:01:42,339 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 23:01:42,341 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-d296ff66-c9ce-4d64-bed7-24b6f407ecf2', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة البيئة للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 23:01:42,341 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:01:42,342 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:01:42,342 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:01:42,342 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:01:42,342 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:01:42,342 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:01:42,419 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:01:42 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_3a8ba047487c4f418d57c850ea4c1bc1'), (b'x-envoy-upstream-service-time', b'3'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b2285ba8d6d8ab-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:01:42,419 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:01:42,419 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:01:42,419 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:01:42,419 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:01:42,420 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:01:42 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_3a8ba047487c4f418d57c850ea4c1bc1', 'x-envoy-upstream-service-time': '3', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b2285ba8d6d8ab-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:01:42,420 - openai._base_client - DEBUG - request_id: req_3a8ba047487c4f418d57c850ea4c1bc1
2025-08-06 23:01:42,420 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:01:42,420 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:01:42,420 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:01:42,421 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:01:42,421 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 23:01:42,421 - bot - ERROR - Failed to post educational_tip content after 3 attempts
2025-08-06 23:01:42,421 - scheduler - ERROR - Failed to post educational_tip content
2025-08-06 23:06:42,421 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 23:06:42,422 - scheduler - INFO - Attempting to post educational_tip content
2025-08-06 23:06:42,423 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-71bde175-b4e9-4d1f-9875-078dde67b391', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة علم الأرض للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 23:06:42,423 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:06:42,424 - httpcore.connection - DEBUG - close.started
2025-08-06 23:06:42,424 - httpcore.connection - DEBUG - close.complete
2025-08-06 23:06:42,424 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 23:06:42,438 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f520234bb90>
2025-08-06 23:06:42,438 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f52032ff260> server_hostname='api.openai.com' timeout=5.0
2025-08-06 23:06:42,452 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f520234bbd0>
2025-08-06 23:06:42,452 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:06:42,452 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:06:42,452 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:06:42,453 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:06:42,453 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:06:42,523 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:06:42 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_6a264e5e6cd54d6388898b613c473e64'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b22faf5a4622b9-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:06:42,523 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:06:42,523 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:06:42,524 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:06:42,524 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:06:42,524 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:06:42 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_6a264e5e6cd54d6388898b613c473e64', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b22faf5a4622b9-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:06:42,524 - openai._base_client - DEBUG - request_id: req_6a264e5e6cd54d6388898b613c473e64
2025-08-06 23:06:42,524 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:06:42,525 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:06:42,525 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:06:42,525 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:06:42,525 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 23:06:42,526 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-18170980-fab1-45f9-9796-46858b34934c', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة الأحياء للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 23:06:42,527 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:06:42,527 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:06:42,528 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:06:42,528 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:06:42,528 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:06:42,528 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:06:42,665 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:06:42 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_20bbe74dc13d4848bad1476fdfcdd1f4'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b22fafdb7522b9-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:06:42,665 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:06:42,666 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:06:42,666 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:06:42,666 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:06:42,666 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:06:42 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_20bbe74dc13d4848bad1476fdfcdd1f4', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b22fafdb7522b9-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:06:42,666 - openai._base_client - DEBUG - request_id: req_20bbe74dc13d4848bad1476fdfcdd1f4
2025-08-06 23:06:42,666 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:06:42,667 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:06:42,667 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:06:42,667 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:06:42,667 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 23:06:42,668 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-3a2b7a85-b1d3-4dc9-a0ab-4d740c3bc63a', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة الأحياء للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 23:06:42,669 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:06:42,669 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:06:42,669 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:06:42,669 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:06:42,670 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:06:42,670 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:06:42,742 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:06:42 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_7471969ce9db4b45bc1420f1af288d43'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b22fb0bdd422b9-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:06:42,742 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:06:42,742 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:06:42,742 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:06:42,742 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:06:42,743 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:06:42 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_7471969ce9db4b45bc1420f1af288d43', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b22fb0bdd422b9-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:06:42,743 - openai._base_client - DEBUG - request_id: req_7471969ce9db4b45bc1420f1af288d43
2025-08-06 23:06:42,743 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:06:42,743 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:06:42,743 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:06:42,743 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:06:42,743 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 23:06:42,744 - bot - ERROR - Failed to post educational_tip content after 3 attempts
2025-08-06 23:06:42,744 - scheduler - ERROR - Failed to post educational_tip content
2025-08-06 23:11:42,744 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 23:11:42,745 - scheduler - INFO - Attempting to post motivational_message content
2025-08-06 23:11:42,747 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-9c178097-b2af-4abe-a88b-e448957b5b77', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على احترام القوانين المدرسية.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:11:42,748 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:11:42,748 - httpcore.connection - DEBUG - close.started
2025-08-06 23:11:42,749 - httpcore.connection - DEBUG - close.complete
2025-08-06 23:11:42,749 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 23:11:42,762 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f5202355590>
2025-08-06 23:11:42,762 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7f52032ff260> server_hostname='api.openai.com' timeout=5.0
2025-08-06 23:11:42,777 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7f52023555d0>
2025-08-06 23:11:42,777 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:11:42,777 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:11:42,777 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:11:42,779 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:11:42,779 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:11:42,860 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:11:42 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_e39ce1dfb60049b09b0b9e8d2349c3eb'), (b'x-envoy-upstream-service-time', b'4'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=JCCdfsyXz.VmeeaeZP4OqpSQkLsRfDWgDkVIKDfwq4Y-1754521902-1.0.1.1-r7ow2L2dFxezGRY7rkY3H90hl0Bge1sdec8kYu.e2_QOICfoNez1iotLokiUr3hcKafcRCxbYkQY26sjDsu4fXqud4.bUAfK9WojYWKgePY; path=/; expires=Wed, 06-Aug-25 23:41:42 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b237046a2e1477-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:11:42,861 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:11:42,861 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:11:42,861 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:11:42,861 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:11:42,862 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:11:42 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_e39ce1dfb60049b09b0b9e8d2349c3eb', 'x-envoy-upstream-service-time': '4', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=JCCdfsyXz.VmeeaeZP4OqpSQkLsRfDWgDkVIKDfwq4Y-1754521902-1.0.1.1-r7ow2L2dFxezGRY7rkY3H90hl0Bge1sdec8kYu.e2_QOICfoNez1iotLokiUr3hcKafcRCxbYkQY26sjDsu4fXqud4.bUAfK9WojYWKgePY; path=/; expires=Wed, 06-Aug-25 23:41:42 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b237046a2e1477-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:11:42,862 - openai._base_client - DEBUG - request_id: req_e39ce1dfb60049b09b0b9e8d2349c3eb
2025-08-06 23:11:42,862 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:11:42,862 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:11:42,863 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:11:42,863 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:11:42,863 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:11:42,864 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-4e4ea95b-f025-4740-89d2-3f306317667b', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على السلوك الإيجابي.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:11:42,866 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:11:42,866 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:11:42,866 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:11:42,866 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:11:42,866 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:11:42,867 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:11:42,949 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:11:42 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_9505f6e86fbc4fda880c0ed188e883c5'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b23704fb751477-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:11:42,949 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:11:42,949 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:11:42,950 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:11:42,950 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:11:42,950 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:11:42 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_9505f6e86fbc4fda880c0ed188e883c5', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b23704fb751477-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:11:42,950 - openai._base_client - DEBUG - request_id: req_9505f6e86fbc4fda880c0ed188e883c5
2025-08-06 23:11:42,950 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:11:42,951 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:11:42,951 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:11:42,951 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:11:42,951 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:11:42,952 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-056744f4-09ac-446d-ab82-dfeac796906f', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على الانضباط المدرسي.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:11:42,953 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:11:42,953 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:11:42,953 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:11:42,953 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:11:42,954 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:11:42,954 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:11:43,028 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:11:43 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_7d700723698e47a5ab35a9ce65b6312c'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b237057ce31477-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:11:43,028 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:11:43,028 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:11:43,029 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:11:43,029 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:11:43,029 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:11:43 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_7d700723698e47a5ab35a9ce65b6312c', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b237057ce31477-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:11:43,029 - openai._base_client - DEBUG - request_id: req_7d700723698e47a5ab35a9ce65b6312c
2025-08-06 23:11:43,029 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:11:43,030 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:11:43,030 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:11:43,030 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:11:43,030 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:11:43,030 - bot - ERROR - Failed to post motivational_message content after 3 attempts
2025-08-06 23:11:43,030 - scheduler - ERROR - Failed to post motivational_message content
2025-08-06 23:14:13,046 - __main__ - INFO - Starting Saudi High School Science Telegram Bot...
2025-08-06 23:14:13,048 - werkzeug - INFO - [31m[1mWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.[0m
 * Running on all addresses (0.0.0.0)
 * Running on http://127.0.0.1:8080
 * Running on http://172.31.117.34:8080
2025-08-06 23:14:13,052 - werkzeug - INFO - [33mPress CTRL+C to quit[0m
2025-08-06 23:14:13,059 - scheduler - INFO - Scheduler thread started
2025-08-06 23:14:13,060 - scheduler - INFO - Content scheduler started
2025-08-06 23:14:13,060 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 23:14:13,062 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.telegram.org:443
2025-08-06 23:14:13,062 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 23:14:13,063 - scheduler - INFO - Attempting to post motivational_message content
2025-08-06 23:14:13,313 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-95750cb5-49e4-406d-9c0a-bd80706ced37', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على التفوق الأكاديمي.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:14:13,331 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:14:13,334 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 23:14:13,366 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe83ad4b650>
2025-08-06 23:14:13,367 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7fe83c36c7a0> server_hostname='api.openai.com' timeout=5.0
2025-08-06 23:14:13,382 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe83ad4b710>
2025-08-06 23:14:13,383 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,383 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:14:13,383 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,384 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:14:13,384 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,408 - urllib3.connectionpool - DEBUG - https://api.telegram.org:443 "GET /bot8446328531:AAG8CZQahNFV_q9dtzP6i7gzVSxxchLsPKo/getMe HTTP/1.1" 200 253
2025-08-06 23:14:13,408 - bot - INFO - Bot connected successfully: TuwaiqBioBot
2025-08-06 23:14:13,410 - urllib3.connectionpool - DEBUG - Starting new HTTPS connection (1): api.telegram.org:443
2025-08-06 23:14:13,469 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:14:13 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_258f8cf9e7fa4935928c7b148298bc4e'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=edErTg8w2iFw.8ogS2qMsY7lcryqZYFLZX6s2yq.Hvs-1754522053-1.0.1.1-bM81EPqzGe07PSTb.axhW8Y4dwLL9MlA8FXpRWjrZWlc5A_vkYrOsmTU8fHhPDmvlz6PfS1srxI15rph.IT28WkErw9Vn0CeitjYc.bZYKA; path=/; expires=Wed, 06-Aug-25 23:44:13 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Set-Cookie', b'_cfuvid=yCBrGFKvqfsY.XsQI6FKr8szxXsL3J6sT31vWnxg81w-1754522053462-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b23ab1ab2e5c93-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:14:13,470 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,471 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:14:13,471 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:14:13,471 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:14:13,471 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers([('date', 'Wed, 06 Aug 2025 23:14:13 GMT'), ('content-type', 'application/json; charset=utf-8'), ('content-length', '279'), ('connection', 'keep-alive'), ('vary', 'Origin'), ('x-request-id', 'req_258f8cf9e7fa4935928c7b148298bc4e'), ('x-envoy-upstream-service-time', '2'), ('cf-cache-status', 'DYNAMIC'), ('set-cookie', '__cf_bm=edErTg8w2iFw.8ogS2qMsY7lcryqZYFLZX6s2yq.Hvs-1754522053-1.0.1.1-bM81EPqzGe07PSTb.axhW8Y4dwLL9MlA8FXpRWjrZWlc5A_vkYrOsmTU8fHhPDmvlz6PfS1srxI15rph.IT28WkErw9Vn0CeitjYc.bZYKA; path=/; expires=Wed, 06-Aug-25 23:44:13 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('strict-transport-security', 'max-age=31536000; includeSubDomains; preload'), ('x-content-type-options', 'nosniff'), ('set-cookie', '_cfuvid=yCBrGFKvqfsY.XsQI6FKr8szxXsL3J6sT31vWnxg81w-1754522053462-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), ('server', 'cloudflare'), ('cf-ray', '96b23ab1ab2e5c93-ORD'), ('alt-svc', 'h3=":443"; ma=86400')])
2025-08-06 23:14:13,471 - openai._base_client - DEBUG - request_id: req_258f8cf9e7fa4935928c7b148298bc4e
2025-08-06 23:14:13,471 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:14:13,479 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:14:13,480 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:14:13,482 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:14:13,482 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:14:13,484 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-95fc393c-b0ad-4cb1-9f36-c5f5e19b0f8c', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على المواظبة.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:14:13,485 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:14:13,485 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,486 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:14:13,486 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,487 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:14:13,487 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,554 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:14:13 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_eef2120936ab4581b8c188f14886a68f'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b23ab25baf5c93-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:14:13,555 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,555 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:14:13,555 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:14:13,555 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:14:13,555 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:14:13 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_eef2120936ab4581b8c188f14886a68f', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b23ab25baf5c93-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:14:13,555 - openai._base_client - DEBUG - request_id: req_eef2120936ab4581b8c188f14886a68f
2025-08-06 23:14:13,556 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:14:13,556 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:14:13,556 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:14:13,557 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:14:13,557 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:14:13,558 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-7779bc0f-736d-425a-8709-68b789b70947', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على احترام القوانين المدرسية.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:14:13,559 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:14:13,559 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,560 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:14:13,560 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,560 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:14:13,560 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,641 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:14:13 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_af3e0dcd720e46a3a5bf47da82e6c381'), (b'x-envoy-upstream-service-time', b'4'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b23ab2cc035c93-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:14:13,642 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,642 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:14:13,643 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:14:13,643 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:14:13,643 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:14:13 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_af3e0dcd720e46a3a5bf47da82e6c381', 'x-envoy-upstream-service-time': '4', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b23ab2cc035c93-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:14:13,643 - openai._base_client - DEBUG - request_id: req_af3e0dcd720e46a3a5bf47da82e6c381
2025-08-06 23:14:13,643 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:14:13,644 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:14:13,644 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:14:13,644 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:14:13,644 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:14:13,645 - bot - ERROR - Failed to post motivational_message content after 3 attempts
2025-08-06 23:14:13,645 - scheduler - ERROR - Failed to post motivational_message content
2025-08-06 23:14:13,645 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 23:14:13,646 - scheduler - INFO - Attempting to post educational_tip content
2025-08-06 23:14:13,647 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-6c3d8f29-7689-4c09-a6b9-c5b010d6884f', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة الأحياء للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 23:14:13,648 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:14:13,648 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,648 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:14:13,648 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,649 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:14:13,649 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,724 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:14:13 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_c5c8c14c14dd48a1b6431f26bed2f29d'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b23ab35c5d5c93-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:14:13,725 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,725 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:14:13,725 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:14:13,725 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:14:13,725 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:14:13 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_c5c8c14c14dd48a1b6431f26bed2f29d', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b23ab35c5d5c93-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:14:13,725 - openai._base_client - DEBUG - request_id: req_c5c8c14c14dd48a1b6431f26bed2f29d
2025-08-06 23:14:13,725 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:14:13,726 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:14:13,726 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:14:13,726 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:14:13,726 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 23:14:13,727 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-7c08f632-273b-4bc4-9ff4-a7e9d43bbba5', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة البيئة للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 23:14:13,728 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:14:13,728 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,728 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:14:13,729 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,729 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:14:13,729 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,795 - urllib3.connectionpool - DEBUG - https://api.telegram.org:443 "GET /bot8446328531:AAG8CZQahNFV_q9dtzP6i7gzVSxxchLsPKo/getChat?chat_id=-1002868373922 HTTP/1.1" 200 803
2025-08-06 23:14:13,795 - bot - INFO - Channel access confirmed: أحياء طويق | أسئلة ومراجعة
2025-08-06 23:14:13,796 - bot - INFO - Bot is ready and running...
2025-08-06 23:14:13,797 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:14:13 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_0c446b854f924805be73d1ad69bea1f5'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b23ab3dcb15c93-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:14:13,798 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,798 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:14:13,798 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:14:13,798 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:14:13,798 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:14:13 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_0c446b854f924805be73d1ad69bea1f5', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b23ab3dcb15c93-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:14:13,798 - openai._base_client - DEBUG - request_id: req_0c446b854f924805be73d1ad69bea1f5
2025-08-06 23:14:13,798 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:14:13,799 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:14:13,799 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:14:13,799 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:14:13,799 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 23:14:13,800 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-f0edfc1e-3537-415d-8a6e-098c7ba4c370', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في إعطاء النصائح التعليمية الفعالة.'}, {'role': 'user', 'content': '\n        أنشئ نصيحة تعليمية قصيرة ومفيدة في مادة الأحياء للطلاب في المرحلة الثانوية.\n        \n        المطلوب:\n        1. نصيحة عملية وتطبيقية\n        2. مرتبطة بالمنهج السعودي\n        3. تساعد في الفهم والحفظ\n        4. لا تزيد عن 200 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - tip: النصيحة التعليمية\n        - subject: المادة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.8}}
2025-08-06 23:14:13,801 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:14:13,801 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,801 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:14:13,801 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,801 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:14:13,801 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:14:13,892 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:14:13 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_b8bdf349ffa24a5a87d8bbc2e5cfa692'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b23ab44cec5c93-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:14:13,893 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:14:13,893 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:14:13,893 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:14:13,893 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:14:13,893 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:14:13 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_b8bdf349ffa24a5a87d8bbc2e5cfa692', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b23ab44cec5c93-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:14:13,893 - openai._base_client - DEBUG - request_id: req_b8bdf349ffa24a5a87d8bbc2e5cfa692
2025-08-06 23:14:13,893 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:14:13,894 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:14:13,894 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:14:13,894 - content_generator - ERROR - Error generating educational tip: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:14:13,894 - bot - ERROR - Failed to generate content for type: educational_tip
2025-08-06 23:14:13,895 - bot - ERROR - Failed to post educational_tip content after 3 attempts
2025-08-06 23:14:13,895 - scheduler - ERROR - Failed to post educational_tip content
2025-08-06 23:14:14,315 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:14:14] "GET / HTTP/1.1" 200 -
2025-08-06 23:14:14,316 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:14:14] "GET / HTTP/1.1" 200 -
2025-08-06 23:15:39,910 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:15:39] "GET / HTTP/1.1" 200 -
2025-08-06 23:15:45,250 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:15:45] "GET / HTTP/1.1" 200 -
2025-08-06 23:15:46,914 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:15:46] "GET / HTTP/1.1" 200 -
2025-08-06 23:15:47,235 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:15:47] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-06 23:15:50,189 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:15:50] "[33mGET /apple-touch-icon-precomposed.png HTTP/1.1[0m" 404 -
2025-08-06 23:15:50,750 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:15:50] "[33mGET /apple-touch-icon.png HTTP/1.1[0m" 404 -
2025-08-06 23:15:50,756 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:15:50] "[33mGET /favicon.ico HTTP/1.1[0m" 404 -
2025-08-06 23:16:19,450 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:16:19] "GET / HTTP/1.1" 200 -
2025-08-06 23:17:28,235 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:17:28] "GET / HTTP/1.1" 200 -
2025-08-06 23:19:13,895 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 23:19:13,896 - scheduler - INFO - Attempting to post motivational_message content
2025-08-06 23:19:13,896 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-3312d378-74dd-476d-bac9-485973e3a8bd', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على الانضباط المدرسي.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:19:13,897 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:19:13,897 - httpcore.connection - DEBUG - close.started
2025-08-06 23:19:13,898 - httpcore.connection - DEBUG - close.complete
2025-08-06 23:19:13,898 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 23:19:13,911 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe83ad4c9d0>
2025-08-06 23:19:13,911 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7fe83c36c7a0> server_hostname='api.openai.com' timeout=5.0
2025-08-06 23:19:13,927 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe83ad4c890>
2025-08-06 23:19:13,927 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:19:13,928 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:19:13,928 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:19:13,928 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:19:13,928 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:19:14,023 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:19:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_c8a8ec3b32c04dfcaf05f124de8de81d'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b242081e5ee270-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:19:14,024 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:19:14,024 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:19:14,024 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:19:14,024 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:19:14,024 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:19:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_c8a8ec3b32c04dfcaf05f124de8de81d', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b242081e5ee270-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:19:14,024 - openai._base_client - DEBUG - request_id: req_c8a8ec3b32c04dfcaf05f124de8de81d
2025-08-06 23:19:14,024 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:19:14,025 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:19:14,025 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:19:14,025 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:19:14,025 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:19:14,026 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-9e7de156-b257-4e32-82fa-5d6f65d20a1c', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على احترام القوانين المدرسية.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:19:14,027 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:19:14,027 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:19:14,028 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:19:14,028 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:19:14,028 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:19:14,028 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:19:14,117 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:19:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_7812101e4ac34a8fa4edd318f82bf3fa'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b24208bee3e270-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:19:14,118 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:19:14,118 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:19:14,118 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:19:14,118 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:19:14,118 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:19:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_7812101e4ac34a8fa4edd318f82bf3fa', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b24208bee3e270-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:19:14,118 - openai._base_client - DEBUG - request_id: req_7812101e4ac34a8fa4edd318f82bf3fa
2025-08-06 23:19:14,118 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:19:14,119 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:19:14,119 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:19:14,119 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:19:14,120 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:19:14,121 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-a9cdc7ae-1e54-4c71-868a-2a735c424bc9', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على الجد والاجتهاد.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:19:14,121 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:19:14,122 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:19:14,122 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:19:14,122 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:19:14,122 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:19:14,122 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:19:14,210 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:19:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_601e3c02f5d94fd0bcee1736d6a60b78'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b242094f6fe270-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:19:14,210 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:19:14,211 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:19:14,211 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:19:14,211 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:19:14,211 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:19:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_601e3c02f5d94fd0bcee1736d6a60b78', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b242094f6fe270-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:19:14,211 - openai._base_client - DEBUG - request_id: req_601e3c02f5d94fd0bcee1736d6a60b78
2025-08-06 23:19:14,211 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:19:14,212 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:19:14,212 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:19:14,212 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:19:14,212 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:19:14,212 - bot - ERROR - Failed to post motivational_message content after 3 attempts
2025-08-06 23:19:14,212 - scheduler - ERROR - Failed to post motivational_message content
2025-08-06 23:20:17,121 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:20:17] "GET / HTTP/1.1" 200 -
2025-08-06 23:20:27,107 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:20:27] "HEAD / HTTP/1.1" 200 -
2025-08-06 23:23:33,703 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:23:33] "GET / HTTP/1.1" 200 -
2025-08-06 23:23:39,661 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:23:39] "GET / HTTP/1.1" 200 -
2025-08-06 23:23:46,749 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:23:46] "GET / HTTP/1.1" 200 -
2025-08-06 23:23:52,606 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:23:52] "GET / HTTP/1.1" 200 -
2025-08-06 23:24:14,213 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 23:24:14,213 - scheduler - INFO - Attempting to post multiple_choice_question content
2025-08-06 23:24:14,214 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-2c755767-938e-4cf3-86cb-634641821d09', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في المناهج السعودية للمرحلة الثانوية. اجعل المحتوى تعليمي ومفيد.'}, {'role': 'user', 'content': '\n        أنشئ سؤال اختيار من متعدد في مادة الأحياء للمرحلة الثانوية وفق المناهج السعودية.\n        \n        المطلوب:\n        1. سؤال تعليمي مفيد ومناسب للمستوى\n        2. أربعة خيارات (أ، ب، ج، د)\n        3. الإجابة الصحيحة\n        4. شرح مختصر للإجابة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - question: نص السؤال\n        - options: قائمة بأربعة خيارات\n        - correct_answer: رقم الإجابة الصحيحة (0-3)\n        - explanation: شرح الإجابة الصحيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 23:24:14,215 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:24:14,215 - httpcore.connection - DEBUG - close.started
2025-08-06 23:24:14,215 - httpcore.connection - DEBUG - close.complete
2025-08-06 23:24:14,215 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 23:24:14,229 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe83ad9d250>
2025-08-06 23:24:14,230 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7fe83c36c7a0> server_hostname='api.openai.com' timeout=5.0
2025-08-06 23:24:14,245 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe83ad9e150>
2025-08-06 23:24:14,246 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:24:14,246 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:24:14,246 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:24:14,246 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:24:14,247 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:24:14,311 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:24:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_23a1752fd9684faf87dc88828b53c38f'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b2495d197550bb-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:24:14,312 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:24:14,312 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:24:14,312 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:24:14,312 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:24:14,312 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:24:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_23a1752fd9684faf87dc88828b53c38f', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b2495d197550bb-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:24:14,313 - openai._base_client - DEBUG - request_id: req_23a1752fd9684faf87dc88828b53c38f
2025-08-06 23:24:14,313 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:24:14,316 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:24:14,316 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:24:14,316 - content_generator - ERROR - Error generating multiple choice question: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:24:14,317 - bot - ERROR - Failed to generate content for type: multiple_choice_question
2025-08-06 23:24:14,318 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-047ecbfd-f8d8-4867-a515-d7998965d01c', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في المناهج السعودية للمرحلة الثانوية. اجعل المحتوى تعليمي ومفيد.'}, {'role': 'user', 'content': '\n        أنشئ سؤال اختيار من متعدد في مادة الأحياء للمرحلة الثانوية وفق المناهج السعودية.\n        \n        المطلوب:\n        1. سؤال تعليمي مفيد ومناسب للمستوى\n        2. أربعة خيارات (أ، ب، ج، د)\n        3. الإجابة الصحيحة\n        4. شرح مختصر للإجابة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - question: نص السؤال\n        - options: قائمة بأربعة خيارات\n        - correct_answer: رقم الإجابة الصحيحة (0-3)\n        - explanation: شرح الإجابة الصحيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 23:24:14,318 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:24:14,319 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:24:14,319 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:24:14,319 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:24:14,320 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:24:14,320 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:24:14,396 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:24:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_88e71bb559d446418bf71c08f55d6393'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b2495d8aa550bb-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:24:14,397 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:24:14,397 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:24:14,397 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:24:14,398 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:24:14,398 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:24:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_88e71bb559d446418bf71c08f55d6393', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b2495d8aa550bb-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:24:14,398 - openai._base_client - DEBUG - request_id: req_88e71bb559d446418bf71c08f55d6393
2025-08-06 23:24:14,398 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:24:14,399 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:24:14,399 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:24:14,399 - content_generator - ERROR - Error generating multiple choice question: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:24:14,400 - bot - ERROR - Failed to generate content for type: multiple_choice_question
2025-08-06 23:24:14,404 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-d3ca79d1-0c79-4e6d-bd43-253f9eccd9e9', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في المناهج السعودية للمرحلة الثانوية. اجعل المحتوى تعليمي ومفيد.'}, {'role': 'user', 'content': '\n        أنشئ سؤال اختيار من متعدد في مادة الأحياء للمرحلة الثانوية وفق المناهج السعودية.\n        \n        المطلوب:\n        1. سؤال تعليمي مفيد ومناسب للمستوى\n        2. أربعة خيارات (أ، ب، ج، د)\n        3. الإجابة الصحيحة\n        4. شرح مختصر للإجابة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - question: نص السؤال\n        - options: قائمة بأربعة خيارات\n        - correct_answer: رقم الإجابة الصحيحة (0-3)\n        - explanation: شرح الإجابة الصحيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 23:24:14,405 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:24:14,406 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:24:14,406 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:24:14,406 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:24:14,406 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:24:14,406 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:24:14,474 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:24:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_758d8e996961493586826b4bfce2ca98'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b2495e1c0b50bb-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:24:14,474 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:24:14,475 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:24:14,475 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:24:14,475 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:24:14,475 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:24:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_758d8e996961493586826b4bfce2ca98', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b2495e1c0b50bb-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:24:14,475 - openai._base_client - DEBUG - request_id: req_758d8e996961493586826b4bfce2ca98
2025-08-06 23:24:14,475 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:24:14,476 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:24:14,476 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:24:14,476 - content_generator - ERROR - Error generating multiple choice question: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:24:14,477 - bot - ERROR - Failed to generate content for type: multiple_choice_question
2025-08-06 23:24:14,477 - bot - ERROR - Failed to post multiple_choice_question content after 3 attempts
2025-08-06 23:24:14,477 - scheduler - ERROR - Failed to post multiple_choice_question content
2025-08-06 23:24:22,526 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:24:22] "GET / HTTP/1.1" 200 -
2025-08-06 23:25:31,368 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:25:31] "HEAD / HTTP/1.1" 200 -
2025-08-06 23:25:37,121 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:25:37] "GET / HTTP/1.1" 200 -
2025-08-06 23:25:37,193 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:25:37] "GET / HTTP/1.1" 200 -
2025-08-06 23:29:04,166 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:29:04] "GET / HTTP/1.1" 200 -
2025-08-06 23:29:14,477 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 23:29:14,478 - scheduler - INFO - Attempting to post motivational_message content
2025-08-06 23:29:14,478 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-80bca9ad-98f7-4d23-a4ac-e8c145eb114a', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على الجد والاجتهاد.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:29:14,479 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:29:14,479 - httpcore.connection - DEBUG - close.started
2025-08-06 23:29:14,480 - httpcore.connection - DEBUG - close.complete
2025-08-06 23:29:14,480 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 23:29:14,493 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe83adb3290>
2025-08-06 23:29:14,493 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7fe83c36c7a0> server_hostname='api.openai.com' timeout=5.0
2025-08-06 23:29:14,507 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe83adb32d0>
2025-08-06 23:29:14,508 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:29:14,508 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:29:14,508 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:29:14,508 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:29:14,508 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:29:14,586 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:29:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_d2b53c1c2ee742f98819f3a30431cd6c'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Set-Cookie', b'__cf_bm=nytq494lDsyJoicImPwHKsFK0j.FqaFEn4M.EGG3fD0-1754522954-1.0.1.1-tPAT9sBpskNJ3XPR3AQCA2VsmkBd4TY3VExTmIG6.8b_T1XrmJH1fbGrhk.nXoW5vuEwFoRDdk0ncMhsinD5r2I40GLIfvIeQSTzIkSO.zI; path=/; expires=Wed, 06-Aug-25 23:59:14 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b250b1bcf2b680-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:29:14,587 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:29:14,587 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:29:14,587 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:29:14,587 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:29:14,587 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:29:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_d2b53c1c2ee742f98819f3a30431cd6c', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'set-cookie': '__cf_bm=nytq494lDsyJoicImPwHKsFK0j.FqaFEn4M.EGG3fD0-1754522954-1.0.1.1-tPAT9sBpskNJ3XPR3AQCA2VsmkBd4TY3VExTmIG6.8b_T1XrmJH1fbGrhk.nXoW5vuEwFoRDdk0ncMhsinD5r2I40GLIfvIeQSTzIkSO.zI; path=/; expires=Wed, 06-Aug-25 23:59:14 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b250b1bcf2b680-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:29:14,587 - openai._base_client - DEBUG - request_id: req_d2b53c1c2ee742f98819f3a30431cd6c
2025-08-06 23:29:14,587 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:29:14,588 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:29:14,588 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:29:14,588 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:29:14,588 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:29:14,590 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-5782bd92-63d8-4dfa-80a8-5d7b5744bc08', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على الجد والاجتهاد.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:29:14,591 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:29:14,591 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:29:14,591 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:29:14,591 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:29:14,591 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:29:14,592 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:29:14,664 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:29:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_054360459e174a749ee1917369cb0de8'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b250b23e1cb680-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:29:14,665 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:29:14,665 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:29:14,665 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:29:14,665 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:29:14,665 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:29:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_054360459e174a749ee1917369cb0de8', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b250b23e1cb680-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:29:14,665 - openai._base_client - DEBUG - request_id: req_054360459e174a749ee1917369cb0de8
2025-08-06 23:29:14,665 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:29:14,666 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:29:14,666 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:29:14,666 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:29:14,666 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:29:14,667 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-a538073d-eefd-4bb5-b32e-e9cb4504ac64', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مرشد طلابي يهدف لتحفيز الطلاب وتوجيههم نحو التفوق الأكاديمي.'}, {'role': 'user', 'content': '\n        أنشئ رسالة تحفيزية للطلاب في المرحلة الثانوية تركز على احترام القوانين المدرسية.\n        \n        المطلوب:\n        1. رسالة إيجابية ومحفزة\n        2. تشجع على الجد والاجتهاد\n        3. تؤكد على أهمية الانضباط المدرسي\n        4. تتماشى مع القيم التعليمية السعودية\n        5. لا تزيد عن 150 كلمة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - message: الرسالة التحفيزية\n        - keyword: الكلمة المفتاحية المستخدمة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.9}}
2025-08-06 23:29:14,668 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:29:14,668 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:29:14,669 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:29:14,669 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:29:14,669 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:29:14,669 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:29:14,738 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:29:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_a61f1a06ae0f4ceb9f3ccb05b3d0cd0e'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b250b2bf20b680-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:29:14,739 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:29:14,739 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:29:14,739 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:29:14,739 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:29:14,739 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:29:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_a61f1a06ae0f4ceb9f3ccb05b3d0cd0e', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b250b2bf20b680-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:29:14,739 - openai._base_client - DEBUG - request_id: req_a61f1a06ae0f4ceb9f3ccb05b3d0cd0e
2025-08-06 23:29:14,740 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:29:14,740 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:29:14,740 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:29:14,740 - content_generator - ERROR - Error generating motivational message: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:29:14,741 - bot - ERROR - Failed to generate content for type: motivational_message
2025-08-06 23:29:14,741 - bot - ERROR - Failed to post motivational_message content after 3 attempts
2025-08-06 23:29:14,741 - scheduler - ERROR - Failed to post motivational_message content
2025-08-06 23:30:35,804 - werkzeug - INFO - 172.31.117.34 - - [06/Aug/2025 23:30:35] "HEAD / HTTP/1.1" 200 -
2025-08-06 23:34:14,741 - asyncio - DEBUG - Using selector: EpollSelector
2025-08-06 23:34:14,742 - scheduler - INFO - Attempting to post multiple_choice_question content
2025-08-06 23:34:14,743 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-548f622b-09bc-4282-bd40-fd4f5c11c1f0', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في المناهج السعودية للمرحلة الثانوية. اجعل المحتوى تعليمي ومفيد.'}, {'role': 'user', 'content': '\n        أنشئ سؤال اختيار من متعدد في مادة علم الأرض للمرحلة الثانوية وفق المناهج السعودية.\n        \n        المطلوب:\n        1. سؤال تعليمي مفيد ومناسب للمستوى\n        2. أربعة خيارات (أ، ب، ج، د)\n        3. الإجابة الصحيحة\n        4. شرح مختصر للإجابة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - question: نص السؤال\n        - options: قائمة بأربعة خيارات\n        - correct_answer: رقم الإجابة الصحيحة (0-3)\n        - explanation: شرح الإجابة الصحيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 23:34:14,744 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:34:14,744 - httpcore.connection - DEBUG - close.started
2025-08-06 23:34:14,744 - httpcore.connection - DEBUG - close.complete
2025-08-06 23:34:14,744 - httpcore.connection - DEBUG - connect_tcp.started host='api.openai.com' port=443 local_address=None timeout=5.0 socket_options=None
2025-08-06 23:34:14,765 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe83adb3e50>
2025-08-06 23:34:14,765 - httpcore.connection - DEBUG - start_tls.started ssl_context=<ssl.SSLContext object at 0x7fe83c36c7a0> server_hostname='api.openai.com' timeout=5.0
2025-08-06 23:34:14,780 - httpcore.connection - DEBUG - start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x7fe83adb1750>
2025-08-06 23:34:14,780 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:34:14,780 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:34:14,780 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:34:14,780 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:34:14,781 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:34:14,894 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:34:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_fa561c8a24d74bc288597a36b39fc8fd'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b258066daea9c6-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:34:14,894 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:34:14,894 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:34:14,894 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:34:14,894 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:34:14,895 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:34:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_fa561c8a24d74bc288597a36b39fc8fd', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b258066daea9c6-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:34:14,895 - openai._base_client - DEBUG - request_id: req_fa561c8a24d74bc288597a36b39fc8fd
2025-08-06 23:34:14,895 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:34:14,896 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:34:14,896 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:34:14,896 - content_generator - ERROR - Error generating multiple choice question: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:34:14,896 - bot - ERROR - Failed to generate content for type: multiple_choice_question
2025-08-06 23:34:14,898 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-106c8254-a186-4c44-b026-876e4a3116c0', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في المناهج السعودية للمرحلة الثانوية. اجعل المحتوى تعليمي ومفيد.'}, {'role': 'user', 'content': '\n        أنشئ سؤال اختيار من متعدد في مادة علم الأرض للمرحلة الثانوية وفق المناهج السعودية.\n        \n        المطلوب:\n        1. سؤال تعليمي مفيد ومناسب للمستوى\n        2. أربعة خيارات (أ، ب، ج، د)\n        3. الإجابة الصحيحة\n        4. شرح مختصر للإجابة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - question: نص السؤال\n        - options: قائمة بأربعة خيارات\n        - correct_answer: رقم الإجابة الصحيحة (0-3)\n        - explanation: شرح الإجابة الصحيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 23:34:14,899 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:34:14,899 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:34:14,899 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:34:14,899 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:34:14,900 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:34:14,900 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:34:14,969 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:34:14 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_fcf0dfa6d79441edb39608e9a365119f'), (b'x-envoy-upstream-service-time', b'1'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b258072f88a9c6-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:34:14,970 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:34:14,970 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:34:14,970 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:34:14,970 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:34:14,971 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:34:14 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_fcf0dfa6d79441edb39608e9a365119f', 'x-envoy-upstream-service-time': '1', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b258072f88a9c6-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:34:14,971 - openai._base_client - DEBUG - request_id: req_fcf0dfa6d79441edb39608e9a365119f
2025-08-06 23:34:14,971 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:34:14,971 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:34:14,971 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:34:14,972 - content_generator - ERROR - Error generating multiple choice question: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:34:14,972 - bot - ERROR - Failed to generate content for type: multiple_choice_question
2025-08-06 23:34:14,973 - openai._base_client - DEBUG - Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'idempotency_key': 'stainless-python-retry-a2a3f7e7-331d-4abc-810a-3f19812c1674', 'json_data': {'messages': [{'role': 'system', 'content': 'أنت مدرس خبير في المناهج السعودية للمرحلة الثانوية. اجعل المحتوى تعليمي ومفيد.'}, {'role': 'user', 'content': '\n        أنشئ سؤال اختيار من متعدد في مادة البيئة للمرحلة الثانوية وفق المناهج السعودية.\n        \n        المطلوب:\n        1. سؤال تعليمي مفيد ومناسب للمستوى\n        2. أربعة خيارات (أ، ب، ج، د)\n        3. الإجابة الصحيحة\n        4. شرح مختصر للإجابة\n        \n        أجب بتنسيق JSON مع الحقول التالية:\n        - question: نص السؤال\n        - options: قائمة بأربعة خيارات\n        - correct_answer: رقم الإجابة الصحيحة (0-3)\n        - explanation: شرح الإجابة الصحيحة\n        '}], 'model': 'gpt-4o', 'response_format': {'type': 'json_object'}, 'temperature': 0.7}}
2025-08-06 23:34:14,974 - openai._base_client - DEBUG - Sending HTTP Request: POST https://api.openai.com/v1/chat/completions
2025-08-06 23:34:14,974 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-08-06 23:34:14,974 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-08-06 23:34:14,974 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-08-06 23:34:14,975 - httpcore.http11 - DEBUG - send_request_body.complete
2025-08-06 23:34:14,975 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-08-06 23:34:15,049 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 401, b'Unauthorized', [(b'Date', b'Wed, 06 Aug 2025 23:34:15 GMT'), (b'Content-Type', b'application/json; charset=utf-8'), (b'Content-Length', b'279'), (b'Connection', b'keep-alive'), (b'vary', b'Origin'), (b'x-request-id', b'req_fcc0bb5eef334e909d03cf81afb5eee7'), (b'x-envoy-upstream-service-time', b'2'), (b'cf-cache-status', b'DYNAMIC'), (b'Strict-Transport-Security', b'max-age=31536000; includeSubDomains; preload'), (b'X-Content-Type-Options', b'nosniff'), (b'Server', b'cloudflare'), (b'CF-RAY', b'96b25807a87aa9c6-ORD'), (b'alt-svc', b'h3=":443"; ma=86400')])
2025-08-06 23:34:15,049 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-08-06 23:34:15,050 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-08-06 23:34:15,050 - httpcore.http11 - DEBUG - response_closed.started
2025-08-06 23:34:15,050 - httpcore.http11 - DEBUG - response_closed.complete
2025-08-06 23:34:15,050 - openai._base_client - DEBUG - HTTP Response: POST https://api.openai.com/v1/chat/completions "401 Unauthorized" Headers({'date': 'Wed, 06 Aug 2025 23:34:15 GMT', 'content-type': 'application/json; charset=utf-8', 'content-length': '279', 'connection': 'keep-alive', 'vary': 'Origin', 'x-request-id': 'req_fcc0bb5eef334e909d03cf81afb5eee7', 'x-envoy-upstream-service-time': '2', 'cf-cache-status': 'DYNAMIC', 'strict-transport-security': 'max-age=31536000; includeSubDomains; preload', 'x-content-type-options': 'nosniff', 'server': 'cloudflare', 'cf-ray': '96b25807a87aa9c6-ORD', 'alt-svc': 'h3=":443"; ma=86400'})
2025-08-06 23:34:15,050 - openai._base_client - DEBUG - request_id: req_fcc0bb5eef334e909d03cf81afb5eee7
2025-08-06 23:34:15,050 - openai._base_client - DEBUG - Encountered httpx.HTTPStatusError
Traceback (most recent call last):
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/openai/_base_client.py", line 1027, in request
    response.raise_for_status()
  File "/home/runner/workspace/.pythonlibs/lib/python3.11/site-packages/httpx/_models.py", line 758, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '401 Unauthorized' for url 'https://api.openai.com/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401
2025-08-06 23:34:15,051 - openai._base_client - DEBUG - Not retrying
2025-08-06 23:34:15,051 - openai._base_client - DEBUG - Re-raising status error
2025-08-06 23:34:15,051 - content_generator - ERROR - Error generating multiple choice question: Error code: 401 - {'error': {'message': 'Incorrect API key provided: proj_BUj*****************lTyD. You can find your API key at https://platform.openai.com/account/api-keys.', 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_api_key'}}
2025-08-06 23:34:15,051 - bot - ERROR - Failed to generate content for type: multiple_choice_question
2025-08-06 23:34:15,051 - bot - ERROR - Failed to post multiple_choice_question content after 3 attempts
2025-08-06 23:34:15,051 - scheduler - ERROR - Failed to post multiple_choice_question content
